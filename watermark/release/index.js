/* eslint-disable */
/*! 
* @ued/watermark@1.0.0
* author:adrian 
* releaseTime: 2020-08-12T05:46:34.932Z
*/
!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n=e();for(var r in n)("object"==typeof exports?exports:t)[r]=n[r]}}(window,(function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";n.r(e),n.d(e,"createWaterMark",(function(){return o}));var r=function(){function t(t){var e=this;this.textAlign="center",this.font="14px Microsoft Yahei",this.fillStyle="rgba(0, 0, 0, 0.5)",this.content="仅供4399UED使用",this.textX=100,this.textY=30,this.success=function(){},this.error=function(){},this.dataSource=t.dataSource,this.dataSourceType=t.dataSourceType,this.textAlign=t.textAlign,this.textBaseline=t.textBaseline,this.font=t.font,this.fillStyle=t.fillStyle,this.content=t.content,this.textX=t.textX,this.textY=t.textY,this.success=t.success,this.error=t.error,this._getImgFromDataSource(this.dataSource,this.dataSourceType,(function(t){console.log("1",t);var n=e._drawToCanvas(t);e.success(n)}))}return t.prototype._getBase64FromImgFile=function(t,e){var n=new FileReader;n.onload=function(t){var n=t.target.result;e&&e(n)},n.readAsDataURL(t)},t.prototype._getImgFromDataSource=function(t,e,n){var r=new Image;"image"==e?r.src=t.src:"base64"==e||"url"==e?r.src=t:"canvas"==e?r.src=t.toDataURL("image/jpeg"):"file"==e&&this._getBase64FromImgFile(t,(function(t){r.src=t})),r.onload=function(){n&&n(r)}},t.prototype._drawToCanvas=function(t){console.log("3"),t.crossOrigin="anonymous";var e=document.createElement("canvas");e.width=t.width,e.height=t.height;var n=e.getContext("2d");return n.drawImage(t,0,0,t.width,t.height,0,0,t.width,t.height),n.textAlign=this.textAlign,n.textBaseline=this.textBaseline,n.font=this.font,n.translate(e.width/2,e.height/2),n.rotate(-30*Math.PI/180),n.translate(-e.width/2,-e.height/2),n.strokeStyle="rgba(255, 255, 255, 0.5)",n.lineWidth=4,n.strokeText(this.content,this.textX,this.textY),n.fillStyle=this.fillStyle,n.fillText(this.content,this.textX,this.textY),console.log("5",e.toDataURL()),e.toDataURL()},t}(),o=function(t){return new r(t)};e.default=r}])}));