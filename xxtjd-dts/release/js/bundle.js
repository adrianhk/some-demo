"use strict";var _typeof2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function a(r,s,u){function p(n,t){if(!s[n]){if(!r[n]){var o="function"==typeof require&&require;if(!t&&o)return o(n,!0);if(l)return l(n,!0);var i=new Error("Cannot find module '"+n+"'");throw i.code="MODULE_NOT_FOUND",i}var e=s[n]={exports:{}};r[n][0].call(e.exports,function(t){return p(r[n][1][t]||t)},e,e.exports,a,r,s,u)}return s[n].exports}for(var l="function"==typeof require&&require,t=0;t<u.length;t++)p(u[t]);return p}({1:[function(t,n,o){var i,e="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(t){return void 0===t?"undefined":_typeof2(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":void 0===t?"undefined":_typeof2(t)};i=function(t,n,o){var i={get:function(t,n,o,i){i=$.extend({async:!0,dataType:"json"},i||{}),userInfo.scookie&&("string"==typeof n?n=n+"&scookie="+userInfo.scookie:n.scookie=userInfo.scookie),$.ajax({type:"GET",url:t,dataType:i.dataType,data:n,cache:!1,async:i.async,success:function(t){"function"==typeof o&&o(t)}})},post:function(t,n,o,i){i=$.extend({async:!0,dataType:"json"},i||{}),userInfo.scookie&&("string"==typeof n?n=n+"&scookie="+userInfo.scookie:n.scookie=userInfo.scookie),$.ajax({type:"POST",url:t,dataType:i.dataType,data:n,cache:!1,async:i.async,success:function(t){"function"==typeof o&&o(t)}})}};"[object Object]"=={}.toString.call(o)?o.exports=i:n.Ajax=i},"function"==typeof define?define(["./m_dialog.js","./Ajax.js"],i):"object"===(void 0===o?"undefined":e(o))?i(0,o,n):i(0,window=window||{},"")},{}],2:[function(t,n,o){var i,e="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(t){return void 0===t?"undefined":_typeof2(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":void 0===t?"undefined":_typeof2(t)};i=function(n,t,o){var i;i="function"==typeof n?n("./m_dialog.js"):window.PopupView;var e={env:{platform:"android",version:"",isClient:1},init:function(){var t=/android/gi.test(navigator.appVersion),n=/4399GameCenter/gi.test(navigator.userAgent),o=/iphone|ipad|ipod/gi.test(navigator.appVersion);this.env.platform=t?"android":o?"ios":"unknow",this.env.isClient=n,/(4399GameCenter\/)(\d+\.\d+\.\d+(\.\d+)?)/g.test(navigator.userAgent)&&(this.env.version=RegExp.$2),userInfo.scookie=unescape(window.login.onLoadCookieForJs())},login:function(){userInfo.scookie||window.login&&window.login.onJSIvoke()},copy:function(t){window.android?window.android.onCopyToClipboard(t,"已复制到剪切板"):i.tip("当前版本不支持复制文本，请升级至最新版")},shareCustom:function(t,n,o,i,e){return new gameBox.share({target:"",all:n,config:{shareTitle:t.shareTitle,shareIcon:t.shareIcon,shareUrl:t.shareUrl,shareContent:t.shareContent},complete:o||function(t){}})},download:function(t){("function"==typeof n?n("./mBoxDownload.js"):window.boxDownload)(t)},checkVersion:function(t,n,o){this.php_js=this.php_js||{},this.php_js.ENV=this.php_js.ENV||{};var i,e=0,a=0,r={dev:-6,alpha:-5,a:-5,beta:-4,b:-4,RC:-3,rc:-3,"#":-2,p:1,pl:1},s=function(t){return(t=(t=(""+t).replace(/[_\-+]/g,".")).replace(/([^.\d]+)/g,".$1.").replace(/\.{2,}/g,".")).length?t.split("."):[-8]},u=function(t){return t?isNaN(t)?r[t]||-7:parseInt(t,10):0};for(t=s(t),n=s(n),i=Math.max(t.length,n.length),e=0;e<i;e++)if(t[e]!=n[e]){if(t[e]=u(t[e]),n[e]=u(n[e]),t[e]<n[e]){a=-1;break}if(t[e]>n[e]){a=1;break}}if(!o)return a;switch(o){case">":case"gt":return 0<a;case">=":case"ge":return 0<=a;case"<=":case"le":return a<=0;case"==":case"=":case"eq":return 0===a;case"<>":case"!=":case"ne":return 0!==a;case"":case"<":case"lt":return a<0;default:return null}}};"[object Object]"=={}.toString.call(o)?o.exports=e:t.ClientBox=e},"function"==typeof define?define(["./m_dialog.js"],i):"object"===(void 0===o?"undefined":e(o))?i(t,o,n):i("",window=window||{},"")},{"./mBoxDownload.js":6,"./m_dialog.js":8}],3:[function(t,n,o){var i,e="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(t){return void 0===t?"undefined":_typeof2(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":void 0===t?"undefined":_typeof2(t)};i=function(t,n,o){var i;i="function"==typeof t?t("./m_dialog.js"):window.PopupView;var e={init:function(s){window.setLoginInfo=function(t,n,o,i,e,a){var r=Array.prototype.slice.call(arguments);""==r[0]?userInfo.scookie="":userInfo.scookie=r.join("|"),"function"==typeof s&&s()},document.location.href="protocol://setLoginInfo"},login:function(){if(!userInfo.scookie)return!(document.location.href="protocol://toLogin")},copy:function(t){window.setClipboard=function(t,n){t?i.tip("已复制到剪切板"):i.tip(n)},document.location.href="protocol://setClipboard?content="+encodeURI(t)},shareCustom:function(t){var n="";for(var o in t)t[o]=encodeURI(t[o]),n+="&"+o+"="+t[o];document.location.href="protocol://toCustomShare?"+n.substr(1)}};"[object Object]"=={}.toString.call(o)?o.exports=e:n.ClientYoupai=e},"function"==typeof define?define(["./m_dialog.js"],i):"object"===(void 0===o?"undefined":e(o))?i(t,o,n):i("",window=window||{},"")},{"./m_dialog.js":8}],4:[function(t,n,o){var i,e="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(t){return void 0===t?"undefined":_typeof2(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":void 0===t?"undefined":_typeof2(t)};i=function(t,n,o){var i;i="function"==typeof t?t("./m_dialog.js"):window.PopupView;var e=function(t){var n,o=new RegExp("(^| )"+t+"=([^;]*)(;|$)");return(n=document.cookie.match(o))?unescape(n[2]):null},a=function(t){var n=new Date;n.setTime(n.getTime()-1),document.cookie=t+"=''; expires="+n.toGMTString()+"; path=/;domain=4399.cn;"};appInfo.environmentMode==appInfo.PRO?window.mobileLogin={login:function(){window.location.href=appInfo.mobiLoginUrl},logout:function(t){var n="mobi_user_code8d8",o=e(n);a(o),a(n),window.location.href=window.location.href}}:window.mobileLogin={login:function(t){this.go("login",t)},register:function(t){this.go("register",t)},go:function(t,n){n=n||window.location.href,t="register"==t?"REGISTER":"LOGIN",window.location.href="https://ptlogin.4399.com/oauth2/authorize.do?client_id=test&response_type=NILL&auth_action="+t+"&redirect_uri="+n},logout:function(t){t=t||window.location.href,window.location.href="http://ptlogin.4399.com/ptlogin/logout.do?url="+t}};var r={go:function(t,n){n=n||window.location.href,t="register"==t?"REGISTER":"LOGIN",window.location.href="https://ptlogin.4399.com/oauth2/authorize.do?client_id=test&response_type=NILL&auth_action="+t+"&redirect_uri="+n},register:function(t){this.go("register",t)},login:function(){if(!this.isLogin())return mobileLogin.login(""),!1},logout:function(){if(this.isLogin())return mobileLogin.logout(""),!1},isLogin:function(){return!!(userInfo.uid&&0<userInfo.uid)},copy:function(t){if(-1<navigator.userAgent.indexOf("UCBrowser"))$(t).bind("click",function(){i.tip("请手动复制啦~")});else{var n=new ClipboardJS(t);n.on("success",function(t){i.tip("已复制到剪切板"),t.clearSelection()}),n.on("error",function(t){i.tip("请手动复制啦~")})}}};"[object Object]"=={}.toString.call(o)?o.exports=r:n.Wap=r},"function"==typeof define?define(["./m_dialog.js"],i):"object"===(void 0===o?"undefined":e(o))?i(t,o,n):i("",window=window||{},"")},{"./m_dialog.js":8}],5:[function(t,n,o){var i=t("./m_dialog.js"),e=t("./m_myaward.js"),a=t("./m_lottery.js"),r=t("./Ajax.js"),s=t("./ClientBox.js"),u=t("./ClientYoupai.js"),p=t("./Wap.js"),l=t("./m_gift.js"),f=t("./m_countdown.js"),c={init:function(){var t=this;window.pauseVideo=function(){var t=document.getElementById("video");t&&t.pause()},appInfo.environment==appInfo.BOX&&(s.init(),s.checkVersion(this.getAndroidVersion(),"4.5","<=")&&$(".view").addClass("lowVersion"),this.getInitInfo()),appInfo.environment==appInfo.YOUPAI&&(s.checkVersion(this.getAndroidVersion(),"4.5","<=")&&$(".view").addClass("lowVersion"),u.init(function(){t.getInitInfo()})),appInfo.environment==appInfo.WAP&&this.getInitInfo(),CONFIG.acstatus==CONFIG.NOTSTART&&i.tip(CONFIG.acttit),CONFIG.acstatus==CONFIG.GAMEOVER&&i.tip(CONFIG.acttit),CONFIG.acstatus==CONFIG.START&&m.init({}),this.download({btn:".j-download"}),this.share({btn:".j-share"}),this.bind();var n=new e($.extend({btn:".niudan-myaward",urlGetMyPrizes:_zt._ztUrl+"-ajaxGetMyPrize",urlWriteUserInfo:_zt._ztUrl+"-ajaxWriteUserInfo"},{myawardTmpl:"#myawardTmpl",loadingTmpl:"#loadingTmpl",dataTmpl:"#myawardDataTmpl",nodataTmpl:"#myawardNodataTmpl",bodyNode:".dialog-body",listNode:".myaward-list",itemTmpl:"myawardItemTmpl"})),o=new a({container:".lotte",start_btn:".niudan-start",multi_btn:".j-lotte-start10",target:".niudan-container",prize_list:"#j-lottery-panel li",lottery_count:".j-lotte-remain",hLottery_count:".j-hremain",urlWriteUserInfo:_zt._ztUrl+"-ajaxWriteUserInfo"});n.bind(),o.bind(),f.bind()},getInitInfo:function(){var e=this;r.post(_zt._ztUrl+"-ajaxInitBx",{_AJAX_:1},function(t){var n=t.data.pageInfo,o=n.score,i=n.dhPrize;e.user(t),d.init({list:i,integral:o}),e.resolve(t)},"json")},user:function(t){var n=t.data,o=n.uid,i=n.nick,e=n.pageInfo,a=e.isShare,r=e.lastTimes,s=t.status,u=$(".j-username"),p=$(".j-login-info"),l=$(".j-unlogin-info"),f=$(".j-lotte-remain");userInfo.isShare=1==s&&0<o?(userInfo.uid=o,userInfo.nick=i,l.hide(),p.show(),u.html(userInfo.nick),LOTTERY.availableLotteryNum=r,f.html(LOTTERY.availableLotteryNum),a):(p.hide(),l.show(),u.html(""),LOTTERY.availableLotteryNum="0",f.html(LOTTERY.availableLotteryNum),!1)},getData:function(){var n=this;r.post(_zt._ztUrl+"-ajaxGetZbList",{_AJAX_:1},function(t){n.resolve(t)},"json")},resolve:function(t){pageInfo.olddata=pageInfo.data,pageInfo.data=t.data;var n=pageInfo.data,o=n.zbStatus,i=n.zbList;if(m.render({zbList:i,zbStatus:o}),f.update(),0<CONFIG.actstatus){var e=o.freshBlank;e&&1<=e&&setTimeout(this.getData.bind(this),60*e*1e3)}},bind:function(){var t=$("body");t.on("click",".j-login-btn",function(){appInfo.environment==appInfo.WAP&&p.login(),appInfo.environment==appInfo.BOX&&s.login(),appInfo.environment==appInfo.YOUPAI&&u.login()}),t.on("click",".j-logout-btn",function(){appInfo.environment==appInfo.WAP&&p.logout()}),t.on("click",".ssjl-item,.lbdh-item .item-cover",function(){var t=$(this).find(".item-more").attr("data-detail");t&&i.awardList({list:t.split("|")})}),t.on("click",".j-goto-live",function(){return appInfo.zbId&&(document.location.href="protocol://toMobileLive?id="+appInfo.zbId),!1}),t.on("click",".niudan-prob",function(){i.prob()}),t.on("click",".niudan-award",function(){i.award()})},download:function(t){var n=$("body");appInfo.environment==appInfo.WAP&&n.on("click",t.btn,function(){window.location.href="1"==appInfo.checkIphone?appInfo.downloadUrlForIos:appInfo.downloadUrlForAdroid}),appInfo.environment==appInfo.BOX&&s.download({btn:t.btn}),appInfo.environment==appInfo.YOUPAI&&$(t.btn).hide()},share:function(t){var n=$("body"),o=function(){userInfo.isShare||r.post(_zt._ztUrl+"-ajaxShare",{_AJAX_:1},function(t){var n=t.status,o=t.data.lastTimes;t.msg;1==n&&(LOTTERY.availableLotteryNum=o,$(".j-lotte-remain").html(LOTTERY.availableLotteryNum))})};if(appInfo.environment==appInfo.YOUPAI&&n.on("click",t.btn,function(t){return userInfo.uid&&0!=userInfo.uid?(u.shareCustom({title:shareInfo.title,content:shareInfo.desc,iconUrl:shareInfo.img,redirectUrl:shareInfo.url}),o()):u.login(),!1}),appInfo.environment==appInfo.BOX){s.shareCustom({shareTitle:shareInfo.title,shareIcon:shareInfo.img,shareUrl:shareInfo.url,shareContent:shareInfo.desc},t.btn,function(t){if(1==t.shareResult)return o(),!1})}},getAndroidVersion:function(){var t=navigator.userAgent.toLowerCase(),n=null;if(0<t.indexOf("android")){n=(t.match(/android [\d._]+/gi)+"").replace(/[^0-9|_.]/gi,"").replace(/_/gi,"."),n=parseInt(n.split(".")[0])}return n}},d={$integral:$(".j-integral"),$body:$("body"),$list:$(".lbdh-list"),init:function(t){var n=t.list,o=t.integral;userInfo.integral=o,this.$integral.html(o),n&&this.$list.html(baidu.template("exchangeListTmpl",{list:n}));var i=this.getExchangeGift();this.getInstance(i,{btn:".j-dh-get"})},getExchangeGift:function(){var n=this;function t(t){l.call(this,t)}return((t.prototype=new l).constructor=t).prototype.handle=function(){var t=this,n=t.$target.attr("data-code"),o=t.$target.attr("data-name");return t.point=parseInt(t.$target.attr("data-point")),userInfo.uid&&0!=userInfo.uid?!!t.resolve({status:CONFIG.actstatus})&&(n?(t.resolve({status:2,data:{prizeName:o,code:n}}),!1):userInfo.integral<t.point?(i.confirm({title:"您的积分不足，无法兑换该礼包",text:"（您可在赛事直播期间，进行夺宝抽奖获得礼包兑换积分！）",btnList:["confirm"]}),!1):void i.confirm({title:"该礼包需要消耗"+t.point+"积分进行兑换",btnList:["confirm","cancel"]},function(){$(".j-confirm").unbind("click").bind("click",function(){t.getPrize()})})):(t.resolve({status:CONFIG.UNLOGIN}),!1)},t.prototype.setState=function(t){this.$target.addClass("geted"),this.$target.attr({"data-code":t.code,"data-name":t.prizeName}),userInfo.integral-=this.point,n.$integral.html(userInfo.integral)},t},getInstance:function(t,n){return new t(n)}},m={data:null,$wrap:$(".sszb-wrap"),$scheduleList:$(".sclb-list"),formatDate:function(t){return t.replace("-","月").replace(" ","日 ")},render:function(t){var n=t.zbList,o=t.zbStatus,i=this,e="";if(this.dataOld=this.data,this.data={zbList:n,zbStatus:o},o.zbId&&(appInfo.zbId=o.zbId),appInfo.environment==appInfo.YOUPAI&&appInfo.zbId&&!$(".j-goto-live").length&&this.$wrap.after('<a href="javascript:;" class="sszb-goyoupai j-goto-live"></a>'),n&&i.$scheduleList.html(baidu.template("scheduleTmpl",{list:n})),$(".mod--sszb .mod-tit").html(/^[\u4e00-\u9fa5]{2}/.exec(o.headTit)+"<span>"+/[\u4e00-\u9fa5]{2}$/.exec(o.headTit)+'</span><i class="mod-bullet-r"></i>'),o.status==pageInfo.LIVE){if(i.dataOld&&o.yp==pageInfo.olddata.zbStatus.yp)return!1;e=baidu.template("youpaiTmpl",o),i.$wrap.html(e)}else if(o.status==pageInfo.PLAY_BACK){if(i.dataOld&&o.spUrl==i.dataOld.zbStatus.spUrl)return!1;e=baidu.template("videoTmpl",o),i.$wrap.html(e)}else i.$wrap.html('<img width="100%" height="100%" alt="" src='+o.defImg+">")}};$("body").ready(function(){c.init()})},{"./Ajax.js":1,"./ClientBox.js":2,"./ClientYoupai.js":3,"./Wap.js":4,"./m_countdown.js":7,"./m_dialog.js":8,"./m_gift.js":9,"./m_lottery.js":10,"./m_myaward.js":11}],6:[function(t,n,o){var i,e="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(t){return void 0===t?"undefined":_typeof2(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":void 0===t?"undefined":_typeof2(t)};i=function(t,n,o){function i(t){var n={downloadUrl:appInfo.downurl,packageName:appInfo.packag,appName:appInfo.appname,iconPath:appInfo.icopath,fileMD5:appInfo.md5_file},o=window.downloadAPI||window.android,i=t.btn||".j-download",e=t.stateTxt||".j-down-state",a=document.querySelector(i),r=document.querySelector(e),s=function(){},u={status_200:function(){r.innerHTML="解压数据包"},status_100:function(){a.innerHTML="暂停下载",s=function(){o.pauseDownload(appInfo.packag)}},status_101:function(){a.innerHTML="继续下载",s=function(){o.downloadApp(JSON.stringify(n))}},status_102:function(){r.innerHTML="等待"},status_103:function(){a.innerHTML="安装游戏",s=function(){o.installApp(appInfo.packag)}},status_201:function(){a.innerHTML="开始游戏",s=function(){o.launchApp(appInfo.packag)}},status_202:function(){a.innerHTML="更新游戏",s=function(){o.downloadApp(JSON.stringify(n))}},status_0:function(){a.innerHTML="游戏下载",s=function(){o.downloadApp(JSON.stringify(n))}}};window.updateApps=function(t){var n=t[0].status;-100==n&&(r.innerHTML="网络错误"),u["status_"+n]()},window.updateApp=function(t){var n=t.status;u["status_"+n]()},o.getAppStatus(appInfo.packag,"updateApps"),o.bindEvent("download","updateApp"),a.addEventListener("click",function(){s()})}"[object Object]"=={}.toString.call(o)?o.exports=i:n.boxDownload=i},"function"==typeof define?define([],i):"object"===(void 0===o?"undefined":e(o))?i(0,o,n):i(0,window=window||{},"")},{}],7:[function(t,n,o){var i,e="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(t){return void 0===t?"undefined":_typeof2(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":void 0===t?"undefined":_typeof2(t)};i=function(t,n,o){var i,e,a,r,s;s="function"==typeof t?(i=t("./m_dialog.js"),e=t("./Ajax.js"),a=t("./ClientBox.js"),r=t("./ClientYoupai.js"),t("./Wap.js")):(i=window.PopupView,e=window.Ajax,a=window.ClientBox,r=window.ClientYoupai,window.Wap);var u={btnCountDownClass:".zbfl-get_chance",btnCountDown:".j-zbfl-get",time:".j-zbfl-countdown",wrap:".niudan-chance",ableOpenBoxClass:"zbfl-alble",minute:".countdown-h",second:".countdown-s",defaultTime:"5",status:3,counting:0,timer:"",bxId:0,bxTime:0,bxFlag:"",bind:function(){var t=this;t.$wrap=$(t.wrap),t.$minute=$(t.minute),t.$second=$(t.second),t.$btnCountDown=$(t.btnCountDown),$("span"+t.btnCountDownClass).bind("click",function(){if(!userInfo.uid||0==userInfo.uid)return appInfo.environment==appInfo.WAP&&s.login(),appInfo.environment==appInfo.BOX&&a.login(),appInfo.environment==appInfo.YOUPAI&&r.login(),!1}),t.$btnCountDown.bind("click",function(){if(!userInfo.uid||0==userInfo.uid)return appInfo.environment==appInfo.WAP&&s.login(),appInfo.environment==appInfo.BOX&&a.login(),appInfo.environment==appInfo.YOUPAI&&r.login(),!1;0<pageInfo.data.zbStatus.status?t.post():i.tip("直播已结束")})},update:function(){var t=this,n=userInfo.uid,o=pageInfo.data.zbStatus.status,i=pageInfo.data.zbStatus.bxId;if(o==pageInfo.LIVE&&0==i&&n&&($(t.btnCountDownClass).html("今日夺宝次数已领完"),t.$wrap.removeClass(t.ableOpenBoxClass)),o==pageInfo.LIVE&&i){if(1==t.counting)return!1;t.updateStatus(pageInfo.data.zbStatus)}else t.counting=0,o!=pageInfo.LIVE&&(clearTimeout(t.timer),$(t.time).html(t.formatTime(0))),t.$wrap.removeClass(t.ableOpenBoxClass)},settime:function(t){var n=this;if(n.formatTime(t),n.counting=1,t<=0)return $("."+n.ableOpenBoxClass).length||n.$wrap.addClass(n.ableOpenBoxClass),!1;t--,n.timer=setTimeout(function(){n.settime(t)},1e3)},post:function(){var o=this;e.post(_zt._ztUrl+"-ajaxOpenBx",{_AJAX_:1,bxId:o.bxId,flag:o.bxFlag,time:o.bxTime},function(t){if(t.status<0)return i.tip(t.msg),!1;if(1==t.status){i.tip(t.msg);var n=parseInt(LOTTERY.availableLotteryNum);n+=1,LOTTERY.availableLotteryNum=n,$(".j-lotte-remain").html(LOTTERY.availableLotteryNum),o.counting=0,o.updateStatus(t.data)}return!1},"json")},updateStatus:function(t){var n=this;t.bxId?(n.bxId=t.bxId,n.bxTime=t.time,n.bxFlag=t.flag,n.minutes=t.minutes,n.counting||n.settime(60*n.minutes)):$(n.btnCountDownClass).html("今日夺宝次数已用完"),n.$wrap.removeClass(n.ableOpenBoxClass)},formatTime:function(t){var n=[parseInt(t/60%60),parseInt(t%60)].join(":").replace(/\b(\d)\b/g,"0$1").split(":");this.$minute.html(n[0]),this.$second.html(n[1])}};"[object Object]"=={}.toString.call(o)?o.exports=u:n.CountDown=u},"function"==typeof define?define(["./m_dialog.js","./Ajax.js","./ClientBox.js","./ClientYoupai.js","./Wap.js"],i):"object"===(void 0===o?"undefined":e(o))?i(t,o,n):i("",window.MODULE=window.MODULE||{},"")},{"./Ajax.js":1,"./ClientBox.js":2,"./ClientYoupai.js":3,"./Wap.js":4,"./m_dialog.js":8}],8:[function(t,n,o){var i,e="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(t){return void 0===t?"undefined":_typeof2(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":void 0===t?"undefined":_typeof2(t)};i=function(t,n,o){var e=function(t,n,o,i){return ue.dialog({id:"j-"+t+"_popup",content:baidu.template(t+"Tmpl",n),lock:!0,force:!0,closeBtn:".dialog-close",init:function(){var t=this;this.obj.on("click",".j-confirm,.j-cancel",function(){t.close()}),"function"==typeof o&&o.call(this)},afterClose:i})},i={tip:function(t){e("tip",{msg:t},function(){$(".ui-dialog-mask").unbind("click"),this.timer(2e3,this.close)})},confirm:function(t,n,o){e("confirm",t,n,o)},myaward:function(t,n,o){e("myaward",t,function(){this.obj;"function"==typeof n&&n.call(this)},o)},giftCode:function(t,n,o){var i=this;e("giftCode",t,function(){"function"==typeof n&&n.call(this),$(".gift_code-link").bind("click",function(){i.tip("进入游戏内点击左上角头像-【兑换】-输入激活码")})},function(){"function"==typeof o&&o.call(this),$(".gift_code-link").unbind("click")})},giftNormal:function(t,n,o){e("giftNormal",t,function(){this.obj;"function"==typeof n&&n.call(this)},o)},form:function(t,n,o){e("form",t,n,o)},prob:function(t,n){return e("prob",{},t,n)},awardList:function(t,n,o){e("awardList",t,n,o)},award:function(t,n,o){e("award",{},n,o)}};"[object Object]"=={}.toString.call(o)?o.exports=i:n.PopupView=i},"function"==typeof define?define([],i):"object"===(void 0===o?"undefined":e(o))?i(0,o,n):i(0,window,"")},{}],9:[function(t,n,o){var i,e="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(t){return void 0===t?"undefined":_typeof2(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":void 0===t?"undefined":_typeof2(t)};i=function(t,n,o){var i,e,a,r,s;function u(t){this.options=$.extend({btn:""},t),this.cache=null,this.init()}s="function"==typeof t?(i=t("./m_dialog.js"),e=t("./Ajax.js"),a=t("./ClientBox.js"),r=t("./ClientYoupai.js"),t("./Wap.js")):(i=window.PopupView,e=window.Ajax,a=window.ClientBox,r=window.ClientYoupai,window.Wap),u.prototype={init:function(){this.$btn=$(this.options.btn),this.bind()},bind:function(){var t=this;t.$btn.bind("click",function(){t.$target=$(this),t.handle()})},handle:function(){var t=this,n=t.$target.attr("data-code"),o=t.$target.attr("data-name");return userInfo.uid&&0!=userInfo.uid?n?(t.resolve({status:2,data:{prizeName:o,code:n}}),!1):!!t.resolve({status:CONFIG.actstatus})&&void t.getPrize():(t.resolve({status:CONFIG.UNLOGIN}),!1)},getPrize:function(){var n=this,t=n.$target.attr("data-pid");e.post(_zt._ztUrl+"-ajaxGetPrize",{_AJAX_:1,pid:t},function(t){n.resolve(t)},"json")},resolve:function(t){if(t.status==CONFIG.UNLOGIN)return appInfo.environment==appInfo.WAP&&s.login(),appInfo.environment==appInfo.BOX&&a.login(),appInfo.environment==appInfo.YOUPAI&&r.login(),!1;if(t.status==CONFIG.NOTSTART)return i.tip("活动未开始"),!1;if(t.status==CONFIG.GAMEOVER)return i.tip("已结束"),!1;if(t.status==CONFIG.START)return!0;if(-3==t.status)return i.tip(t.msg),this.$target.attr("data-status",t.status),!1;if(0<t.status){var n=t.data;return i.giftCode({prizeName:n.prizeName,code:n.code},function(){this.obj;appInfo.environment==appInfo.WAP&&s.copy("#j-copy-btn"),appInfo.environment==appInfo.BOX&&$("#j-copy-btn").bind("click",function(){a.copy($("#j-copy-code").attr("value"))}),appInfo.environment==appInfo.YOUPAI&&$("#j-copy-btn").bind("click",function(){r.copy($("#j-copy-code").attr("value"))})},function(){}),1==t.status&&this.setState(n),!1}},setState:function(t){this.$target.attr({"data-code":t.code,"data-name":t.prizeName})}},"[object Object]"=={}.toString.call(o)?o.exports=u:n.Gift=u},"function"==typeof define?define(["./m_dialog.js","./Ajax.js","./ClientBox.js","./ClientYoupai.js","./Wap.js"],i):"object"===(void 0===o?"undefined":e(o))?i(t,o,n):i("",window.MODULE=window.MODULE||{},"")},{"./Ajax.js":1,"./ClientBox.js":2,"./ClientYoupai.js":3,"./Wap.js":4,"./m_dialog.js":8}],10:[function(t,n,o){var i,e="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(t){return void 0===t?"undefined":_typeof2(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":void 0===t?"undefined":_typeof2(t)};i=function(t,n,o){var r,i,a,s,u,p;function e(t){this.options=$.extend({container:".cjfl-lotte",start_btn:".j-lotte-start",multi_btn:".j-lotte-start10",target:"#j-lottery-panel",prize_list:"#j-lottery-panel li",lottery_count:".j-lotte-remain"},t),i.call(this,this.options),this.$container=$(this.options.container),this.$start_btn=$(this.options.start_btn),this.$multi_btn=$(this.options.multi_btn),this.$target=$(this.options.target),this.$prize_list=$(this.options.prize_list),this.$lottery_count=$(this.options.lottery_count),this.$hLottery_count=$(this.options.hLottery_count)}"function"==typeof t?(r=t("./m_dialog.js"),i=t("./m_myaward.js"),a=t("./Ajax.js"),s=t("./ClientBox.js"),u=t("./ClientYoupai.js"),p=t("./Wap.js")):(r=window.PopupView,a=window.Ajax,s=window.ClientBox,u=window.ClientYoupai,p=window.Wap,i=window.MODULE.MyAward),((e.prototype=new i).constructor=e).prototype.bind=function(){var o=this,n=function(t){var n=parseInt(t.attr("data-times"))||1;return CONFIG.actstatus==CONFIG.NOTSTART?(o.handleLottery({status:CONFIG.NOTSTART}),!1):CONFIG.actstatus==CONFIG.GAMEOVER?(o.handleLottery({status:CONFIG.GAMEOVER}),!1):userInfo.uid&&0!=userInfo.uid?void(+LOTTERY.availableLotteryNum<parseInt(t.attr("data-times"))?o.handleLottery({status:LOTTERY.NOCHANCE}):10==n?(r.confirm({title:"您确定要进行10连抽吗?"}),$(".j-confirm").bind("click",function(){i(n)})):i(n)):(o.handleLottery({status:CONFIG.UNLOGIN}),!1)},i=function(t){o.$start_btn.addClass("lottery_running"),function(n){for(var t=1;t<=8;t++)$(".qiu_"+t).addClass("wieyi_"+t);setTimeout(function(){for(var t=1;t<=8;t++)$(".qiu_"+t).removeClass("wieyi_"+t);n()},1500)}(function(){o.getLottery(t)})};o.$start_btn.bind("click",function(){if(o.$start_btn.hasClass("lottery_running"))return!1;n($(this))}),o.$multi_btn&&o.$multi_btn.bind("click",function(){var t=$(this);return o.$start_btn.hasClass("lottery_running")||n(t),!1})},e.prototype.getLottery=function(i){var e=this;a.post(_zt._ztUrl+"-ajaxLottery",{_AJAX_:1,times:i},function(t){if(t.status<=0)e.handleLottery(t);else{var n=e.$target.find("img:[data-prize="+t.data.prizeList[0].pid+"]").attr("src"),o=$(".niudan_hole").find("img");o.attr("src",n),o.load(function(){console.log("1"),o.addClass("niudan-out"),setTimeout(function(){e.$start_btn.removeClass("lottery_running"),e.handleLottery(t,i)},1e3)})}},"json")},e.prototype.handleLottery=function(t,n){var o=this;if(o.$container.removeClass("lottery_running"),t.status==CONFIG.UNLOGIN)return appInfo.environment==appInfo.WAP&&p.login(),appInfo.environment==appInfo.BOX&&s.login(),appInfo.environment==appInfo.YOUPAI&&u.login(),!1;if(t.status!=CONFIG.NOTSTART)if(t.status!=CONFIG.GAMEOVER){if(t.status==LOTTERY.NOCHANCE){var i=ue.dialog.list["j-confirm_popup"];return i&&i.close(),void r.confirm({title:"夺宝次数不足，无法夺宝",text:"观看直播，分享专题即可获得夺宝次数",btnList:["confirm"]})}if(t.status<=0)r.tip(t.msg);else{var e=t.data;if(1<n)return r.myaward({contentTmpl:$(o.options.loadingTmpl).html()},function(){var t=ue.dialog.list["j-myaward_popup"];o.renderList(e,1),o.infoList[1]=e,$(".dialog-title").html("恭喜您，获得了"),t.reset()},function(){$(".j-myawardWatch").unbind("click")}),void o.updateTimes(e.lastTimes);var a=e.prizeList[0];0==a.kind&&r.confirm({title:"夺宝失败，请继续努力~",btnList:["confirm"]},function(){},function(){$(".niudan_hole").find("img").unbind("load").attr("src","").removeClass("niudan-out")}),a.kind==AWARD.GIFT&&r.giftCode(a,function(){this.obj;appInfo.environment==appInfo.WAP&&p.copy("#j-copy-btn"),appInfo.environment==appInfo.BOX&&$("#j-copy-btn").bind("click",function(){s.copy($("#j-copy-code").attr("value"))}),appInfo.environment==appInfo.YOUPAI&&$("#j-copy-btn").bind("click",function(){u.copy($("#j-copy-code").attr("value"))})},function(){$(".niudan_hole").find("img").unbind("load").attr("src","").removeClass("niudan-out")}),a.kind==AWARD.UNNEED_UINFO&&(userInfo.integral=e.score,$(".j-integral").html(userInfo.integral),r.giftNormal(a,function(){},function(){$(".niudan_hole").find("img").unbind("load").attr("src","").removeClass("niudan-out")})),a.kind==AWARD.NEED_UINFO&&(a.uinfo=null,a.fst=1,o.form(a)),a.kind==AWARD.COLLECTIONS&&o.games(a),o.updateTimes(e.lastTimes)}}else r.tip("活动已结束");else r.tip("活动未开始")},e.prototype.updateTimes=function(t){LOTTERY.availableLotteryNum=t,this.$lottery_count.html(t)},"[object Object]"=={}.toString.call(o)?o.exports=e:n.Lottery=e},"function"==typeof define?define(["./m_dialog.js","./m_myaward.js","./Ajax.js","./ClientBox.js","./ClientYoupai.js","./Wap.js"],i):"object"===(void 0===o?"undefined":e(o))?i(t,o,n):i("",window.MODULE=window.MODULE||{},"")},{"./Ajax.js":1,"./ClientBox.js":2,"./ClientYoupai.js":3,"./Wap.js":4,"./m_dialog.js":8,"./m_myaward.js":11}],11:[function(t,n,o){var i,e="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(t){return void 0===t?"undefined":_typeof2(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":void 0===t?"undefined":_typeof2(t)};i=function(t,n,o){var r,s,l,f,c;function i(t){this.options=$.extend({btn:".j-myaward",myawardTmpl:"#myawardTmpl",loadingTmpl:"#loadingTmpl",dataTmpl:"#myawardDataTmpl",nodataTmpl:"#myawardNodataTmpl",bodyNode:".dialog-body",listNode:".myaward-list",itemTmpl:"myawardItemTmpl"},t),this.cache=null,this.prizeList=[]}c="function"==typeof t?(r=t("./m_dialog.js"),s=t("./Ajax.js"),l=t("./ClientBox.js"),f=t("./ClientYoupai.js"),t("./Wap.js")):(r=window.PopupView,s=window.Ajax,l=window.ClientBox,f=window.ClientYoupai,window.Wap),i.prototype={bind:function(){var n=this;$(this.options.btn).bind("click",function(t){return userInfo.uid&&0!=userInfo.uid?r.myaward({body_tmpl:$(n.options.loadingTmpl).html()},function(){n.getListData()},function(){if(n.copy){for(var t=0;t<n.copy.length;t++)n.copy[t]&&n.copy[t].close();delete n.copy}$(".j-myawardWatch").unbind("click")}):(appInfo.environment==appInfo.WAP&&c.login(),appInfo.environment==appInfo.BOX&&l.login(),appInfo.environment==appInfo.YOUPAI&&f.login()),!1})},getListData:function(){var i=this;s.post(i.options.urlGetMyPrizes,{_AJAX_:1},function(t){var n=ue.dialog.list["j-myaward_popup"];if(n){var o=n.obj;0<t.status?(i.renderList(t.data,1),i.prizeList=t.data.prizeList):t.status==AWARD.NOAWARD_DATA?o.find(i.options.bodyNode).html($(i.options.nodataTmpl).html()):(r.tip(t.msg),n.close()),n.reset()}},"json")},renderList:function(n,t){var i=this,o=ue.dialog.list["j-myaward_popup"].obj,e=Math.ceil(n.prizeList.length/n.perPage);o.find(i.options.bodyNode).html($(i.options.dataTmpl).html());for(var a,r=$(i.options.listNode),s=n.prizeList.slice((t-1)*n.perPage,t*n.perPage),u="",p=0;p<s.length;p++)u+=baidu.template(i.options.itemTmpl,s[p]);r.html(u),ue.pager({pagerTarget:o.find(".dialog-pager"),first:"",firstDisabled:"",last:"",lastDisabled:"",prev:'<a href="#" class="pager-pre">上一页</a>',prevDisabled:'<span style="color:#747474;" class="pager-pre">上一页</span>',next:'<a href="#" class="pager-next">下一页</a>',nextDisabled:'<span style="color:#747474;" class="pager-next">下一页</span>',current:'<span class="cur">@{page}</span>',page:'<a href="#">@{page}</a>',tip:'<span class="pager-count">@{nowPage}/@{pageCount}</span>',goto:"",now:t,maxPage:5,per:n.perPage,pageCount:e,onchange:function(t){i.renderList(n,t)}}),$(".j-myawardWatch").bind("click",function(t){var n=$(this).closest("li").attr("data-id"),o=i.getPrizeListItem(n);return i.form(o,this),!1}),$(".j-myawardGame").bind("click",function(){var t=$(this).closest("li").attr("data-id"),n=i.getPrizeListItem(t);return i.games(n,this),!1});for(p=0;a=s[p],p<s.length;p++)1==a.kind&&(appInfo.environment==appInfo.WAP&&c.copy("#j-copy-btn"+a.id),appInfo.environment==appInfo.BOX&&$("#j-copy-btn"+a.id).bind("click",function(t){return function(){l.copy($("#j-copy-code"+t).attr("value"))}}(a.id)),appInfo.environment==appInfo.YOUPAI&&$("#j-copy-btn"+a.id).bind("click",function(t){return function(){f.copy($("#j-copy-code"+t).attr("value"))}}(a.id)))},getPrizeListItem:function(t){if(this.prizeList)for(var n=0;n<this.prizeList.length;n++)if(t==this.prizeList[n].id)return this.prizeList[n]},form:function(t,e){var a=this;r.form(t,function(){var o=this,i=(this.obj,$(".j-form"));$(".j-submit").bind("click",function(){var n=!0;if(i.find("input[type=text]").each(function(){var t=$(this);if(""==$.trim(t.val()))return r.tip("请填写完整信息"),n=!1}),""==$.trim(i.find("textarea").val()))return r.tip("请填写完整信息"),n=!1;var t=$.trim($("input[name=uphone]").val());if(!/^0?(13|14|15|17|18)[0-9]{9}$/.test(t))return r.tip("请填写正确的电话号码"),n=!1;n&&s.post(a.options.urlWriteUserInfo,i.serialize()+"&_AJAX_=1",function(t){if(1==t.status){if(o.close(),r.tip(t.msg),e){var n=i.serialize().split("&");a.getPrizeListItem(n[0].split("=")[1]).uinfo={uname:decodeURIComponent(n[1].split("=")[1]),uphone:n[2].split("=")[1],uaddress:decodeURIComponent(n[3].split("=")[1])},$(e).text("【查看，您的收件信息】")}}else r.tip(t.msg)},"json")})},function(){$(".niudan_hole").find("img").unbind("load").attr("src","").removeClass("niudan-out")})}},"[object Object]"=={}.toString.call(o)?o.exports=i:n.MyAward=i},"function"==typeof define?define(["./m_dialog.js","./Ajax.js","./ClientBox.js","./ClientYoupai.js","./Wap.js"],i):"object"===(void 0===o?"undefined":e(o))?i(t,o,n):i("",window.MODULE=window.MODULE||{},"")},{"./Ajax.js":1,"./ClientBox.js":2,"./ClientYoupai.js":3,"./Wap.js":4,"./m_dialog.js":8}]},{},[5]);
//# sourceMappingURL=bundle.js.map
